<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Exploring Singletons &mdash; The Ape 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/bootswatch-3.3.4/spacelab/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="The Ape 0.0.1 documentation" href="../../../../index.html" />
    <link rel="up" title="Exploring Singletons" href="index.html" />
    <link rel="next" title="The Singleton Source" href="singleton_source.html" />
    <link rel="prev" title="Exploring Singletons" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../../index.html">
          The Ape</a>
        <span class="navbar-text navbar-version pull-left"><b>0.0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../user/index.html">User Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Developer Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../log_setter.html">Log Setter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../main.html">The Main Entry Point</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../readme.html">The APE (Read Me)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../components/index.html">The Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../infrastructure/index.html">The Ape&#8217;s Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../parts/index.html">Parts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../plugins/index.html">Plugins</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Exploring Singletons</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#the-idea">The Idea</a></li>
<li><a class="reference internal" href="#the-function-test">The Function Test</a></li>
<li><a class="reference internal" href="#testing-without-the-function">Testing Without the Function</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="index.html" title="Previous Chapter: Exploring Singletons"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Exploring Sin...</span>
    </a>
  </li>
  <li>
    <a href="singleton_source.html" title="Next Chapter: The Singleton Source"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">The Singleton... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../../../../_sources/documentation/developer/explorations/explore_singletons/exploring_singeltons.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="exploring-singletons">
<h1>Exploring Singletons<a class="headerlink" href="#exploring-singletons" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="ape-documentation-exploring-singletons"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This won&#8217;t be an extensive exploration since it seems to be relatively straightforward. This is a test of creating a <a class="reference external" href="http://en.wikipedia.org/wiki/Singleton_pattern">singleton</a> in python. The motivation for it is that I want to allow plugins to add themselves to aggregating composites without having to worry if others have alread created one.</p>
</div>
<div class="section" id="the-idea">
<h2>The Idea<a class="headerlink" href="#the-idea" title="Permalink to this headline">¶</a></h2>
<p>To create the singleton you just need to rely on the fact that when you make multiple calls to the same module in python, the interpreter only creates one instance of it. So you can create a function in it that instantiates the object and even if multiple modules import it, they each get the same object.</p>
</div>
<div class="section" id="the-function-test">
<h2>The Function Test<a class="headerlink" href="#the-function-test" title="Permalink to this headline">¶</a></h2>
<p>I created a file called <a class="reference internal" href="singleton_source.html#ape-documentation-singleton-source"><span>singleton_source.py</span></a> that creates a function called get that creates and returns an instance of the <code class="docutils literal"><span class="pre">SingletonTest</span></code> class. I then created two files <code class="docutils literal"><span class="pre">test_1.py</span></code> and <code class="docutils literal"><span class="pre">test_2.py</span></code> that get the singletons from the singleton source.</p>
<p><code class="docutils literal"><span class="pre">test_1.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">singleton_source</span>

<span class="hll"><span class="n">t1</span> <span class="o">=</span> <span class="n">singleton_source</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span>
<span class="n">test_1</span> <span class="o">=</span> <span class="n">singleton_source</span><span class="o">.</span><span class="n">test_instance</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">test_2.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">singleton_source</span>

<span class="hll"><span class="n">t2</span> <span class="o">=</span> <span class="n">singleton_source</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span>
<span class="n">test_2</span> <span class="o">=</span> <span class="n">singleton_source</span><span class="o">.</span><span class="n">test_instance</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ape.documentation.developer.appendices.explore_singletons.test_1</span> <span class="kn">import</span> <span class="n">t1</span>
<span class="kn">from</span> <span class="nn">ape.documentation.developer.appendices.explore_singletons.test_2</span> <span class="kn">import</span> <span class="n">t2</span>

<span class="k">assert</span> <span class="n">t1</span> <span class="ow">is</span> <span class="n">t2</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-without-the-function">
<h2>Testing Without the Function<a class="headerlink" href="#testing-without-the-function" title="Permalink to this headline">¶</a></h2>
<p>I think the reason why the example I saw used the function call was so that you can refresh it, but it seems to me that if you aren&#8217;t going to, you should just be able to create an instance in the module without using a function. Using the same modules as above:</p>
<p><code class="docutils literal"><span class="pre">test_1.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">singleton_source</span>

<span class="n">t1</span> <span class="o">=</span> <span class="n">singleton_source</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="hll"><span class="n">test_1</span> <span class="o">=</span> <span class="n">singleton_source</span><span class="o">.</span><span class="n">test_instance</span>
</span></pre></div>
</div>
<p><code class="docutils literal"><span class="pre">test_2.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">singleton_source</span>

<span class="n">t2</span> <span class="o">=</span> <span class="n">singleton_source</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="hll"><span class="n">test_2</span> <span class="o">=</span> <span class="n">singleton_source</span><span class="o">.</span><span class="n">test_instance</span>
</span></pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ape.documentation.developer.appendices.explore_singletons.test_1</span> <span class="kn">import</span> <span class="n">test_1</span>
<span class="kn">from</span> <span class="nn">ape.documentation.developer.appendices.explore_singletons.test_2</span> <span class="kn">import</span> <span class="n">test_2</span>

<span class="k">assert</span> <span class="n">test_1</span> <span class="ow">is</span> <span class="n">test_2</span>
</pre></div>
</div>
<p>I think I&#8217;ll use the second version for the plugins.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, the cloistered monkey.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>